<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#" lang="en">
  <head>
    <title>passport-passwordless</title>
    <meta charset="utf-8">
    <meta name="description" content="Passport module for the passwordless library.">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="canonical" href="https://www.passportjs.org/packages/passport-passwordless/">
    <link rel="manifest" href="/manifest.webmanifest"/>
    <meta name="theme-color" content="#35DF79"/>
    <link rel="shortcut icon" href="/images/favicon/favicon.ico"/>
    <link rel="icon" sizes="16x16" type="image/png" href="/images/favicon/favicon-16x16.png"/>
    <link rel="icon" sizes="32x32" type="image/png" href="/images/favicon/favicon-32x32.png"/>
    <link rel="icon" sizes="36x36" type="image/png" href="/images/favicon/android-icon-36x36.png"/>
    <link rel="icon" sizes="48x48" type="image/png" href="/images/favicon/android-icon-48x48.png"/>
    <link rel="icon" sizes="70x70" type="image/png" href="/images/favicon/ms-icon-70x70.png"/>
    <link rel="icon" sizes="72x72" type="image/png" href="/images/favicon/android-icon-72x72.png"/>
    <link rel="icon" sizes="96x96" type="image/png" href="/images/favicon/android-icon-96x96.png"/>
    <link rel="icon" sizes="144x144" type="image/png" href="/images/favicon/ms-icon-144x144.png"/>
    <link rel="icon" sizes="150x150" type="image/png" href="/images/favicon/ms-icon-150x150.png"/>
    <link rel="icon" sizes="192x192" type="image/png" href="/images/favicon/android-icon-192x192.png"/>
    <link rel="icon" sizes="310x310" type="image/png" href="/images/favicon/ms-icon-310x310.png"/>
    <link rel="apple-touch-icon" href="/images/favicon/apple-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="60x60" href="/images/favicon/apple-icon-60x60.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="/images/favicon/apple-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon/apple-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="/images/favicon/apple-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/apple-icon-144x144.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/apple-icon-152x152.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-icon-180x180.png"/>
    <meta name="msapplication-config" content="/browserconfig.xml"/>
    <meta name="msapplication-TileColor" content="#35DF79"/>
    <meta name="msapplication-TileImage" content="/images/favicon/ms-icon-144x144.png"/>
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="passport-passwordless"/>
    <meta property="og:description" content="Passport module for the passwordless library."/>
    <meta property="og:url" content="https://www.passportjs.org/packages/passport-passwordless/"/>
    <meta property="og:image" content="https://www.passportjs.org/images/facebook-card.png"/>
    <meta property="og:image:type" content="image/png"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    <meta property="og:site_name" content="Passport.js"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@passportjs"/>
    <meta name="twitter:title" content="passport-passwordless"/>
    <meta name="twitter:description" content="Passport module for the passwordless library."/>
    <meta name="twitter:image" content="https://www.passportjs.org/images/twitter-card.png"/>
    <meta name="flattr:id" content="d5znvd"/>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-73332146-2', 'auto');
      ga('send', 'pageview');
    </script>
    <!--+google-tag-manager('GTM-M5S3PH')-->
    <!--link(type='text/css', rel='stylesheet', href='http://fast.fonts.net/cssapi/7527d73a-ebfe-45db-a201-ff2812df4b18.css')-->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
    <link rel="stylesheet" href="/assets/styles/all.css">
    <script data-main="/script/main" src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.js"></script>
  </head>
  <body>
    <div id="container"><span id="top"></span>
      <div id="toolbar">
        <div class="toolbar-search">
          <form action="/search">
            <button type="submit"></button>
            <input type="text" name="q" placeholder="Search for Strategies">
          </form>
        </div>
        <div class="toolbar-social">
          <ul>
            <li class="facebook"><a href="https://www.facebook.com/passportjs" target="_blank"></a></li>
            <li class="twitter"><a href="https://twitter.com/passportjs" target="_blank"></a></li>
            <li class="github"><a href="https://github.com/jaredhanson/passport" target="_blank"><span class="count">0</span></a></li>
          </ul>
        </div>
      </div>
      <nav id="menu"><a class="menu-logo" href="/" title="Passport.js"></a>
        <div class="menu-trigger"><span></span></div>
        <div class="menu-items">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/docs/">Documentation</a></li>
            <li><a href="/features/">Features</a></li>
            <li><a href="/packages/">Strategies</a></li>
          </ul><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=passportjsorg" id="_carbonads_js"></script>
        </div>
      </nav>
      <div id="content">
        <div class="package hproduct" id="package">
          <div class="description"><h1 id="passport-passwordless">Passport-Passwordless</h1>
<p>This project was build, to handle <a href="https://github.com/florianheinemann/passwordless">Passwordless</a> as a build in authentication method using the common authentication library <a href="https://github.com/jaredhanson/passport">Passport</a>.
By plugging into Passport, <a href="https://github.com/florianheinemann/passwordless">Passwordless</a> can be easily and unobtrusively integrated into any application or framework that supports Connect-style middleware, including Express.</p>
<p>For now, only the redis store and the email delivery was tested. Feel free to add configuration samples for data stores and code samples for new delivery types. </p>
<h2 id="installation">Installation</h2>
<p>  $ npm install passport-passwordless</p>
<h2 id="usage">Usage</h2>
<pre><code class="lang-javascript">  passport.use(<span class="keyword">new</span> PasswordlessStrategy({ 
    <span class="comment">//... configuration ... </span>
  }, <span class="function"><span class="keyword">function</span> (<span class="params">req, user, done</span>) </span>{

    <span class="comment">//.. validate the logged in user and build your final user object</span>

    <span class="keyword">return</span> done(<span class="literal">null</span>, user);
  };
</code></pre>
<h2 id="minimal-configuration-sample">Minimal configuration sample</h2>
<pre><code class="lang-javascript">  {
    <span class="attr">allowTokenReuse</span> : <span class="literal">true</span>,
    <span class="attr">tokenLifeTime</span>   : <span class="number">1000</span> * <span class="number">60</span> * <span class="number">10</span>,

    <span class="attr">store</span> : {
      <span class="attr">path</span>   : __dirname + <span class="string">'/node_modules/passwordless-redis'</span>,
      <span class="attr">config</span> : [
        <span class="number">6379</span>,
        <span class="string">'127.0.0.1'</span>,
        {

        }
      ]
    },
    <span class="attr">delivery</span> : {
      <span class="attr">type</span> : <span class="string">'emailjs'</span>,
      <span class="attr">allowGet</span> : <span class="literal">true</span>,
      <span class="attr">path</span> : __dirname + <span class="string">'/node_modules/emailjs'</span>,
      <span class="attr">config</span> : {
        <span class="attr">server</span> : {
          <span class="attr">user</span>     : <span class="string">'test.user@domain.com'</span>, 
          <span class="attr">password</span> : <span class="string">'yourPwd'</span>, 
          <span class="attr">host</span>     : <span class="string">'yourSmtp'</span>, 
          <span class="attr">ssl</span>      : <span class="literal">true</span>
        },
        <span class="attr">msg</span> : {
          <span class="attr">text</span>    : <span class="string">'Hello!\nAccess your account here: http://&lt;%= hostname %&gt;?token=&lt;%= tokenToSend %&gt;&amp;uid='</span>,
          <span class="attr">html</span>    : <span class="string">'&lt;html&gt;&lt;p&gt;Hello&lt;/p&gt;&lt;br&gt;&lt;p&gt;Access your account here: http://&lt;%= hostname %&gt;?token=&lt;%= tokenToSend %&gt;&amp;uid=&lt;%= uidToSend %&gt;&lt;/p&gt;'</span>
          <span class="attr">subject</span> : <span class="string">'Token for &lt;%= hostname %&gt;'</span>
        }
      }
    }
  }
</code></pre>
<h2 id="configuration-with-description">Configuration with description</h2>
<p>The path parameter for the store and delivery configuration is needed to exclude obsolete library dependencies of this package. So the delivery / store package can be required from the parent lib.</p>
<pre><code class="lang-javascript">  {
    <span class="comment">//If this property will be set to true, each authentication request generates a new passwordless instance to handle multiple and dynamic configurations</span>
    <span class="comment">//If it's set to false, the passwordless instance will be created by instantiating the strategy</span>
    <span class="attr">dynamicConfig</span> : <span class="literal">false</span>,

    <span class="comment">//all passwordless internal parameters, that are used to parse the request query object</span>
    <span class="attr">userField</span>     : <span class="string">'user'</span>,
    <span class="attr">tokenField</span>    : <span class="string">'tokenField'</span>,
    <span class="attr">uidField</span>      : <span class="string">'uidField'</span>,
    <span class="attr">deliveryField</span> : <span class="string">'delivery'</span>,
    <span class="attr">originField</span>   : <span class="literal">null</span>,

    <span class="comment">//token relevant parameters</span>
    <span class="attr">allowTokenReuse</span> : <span class="literal">true</span>,
    <span class="attr">tokenLifeTime</span>   : <span class="number">1000</span> * <span class="number">60</span> * <span class="number">10</span>,

    <span class="comment">//specify maximal token length</span>
    <span class="attr">maxTokenLength</span> : <span class="number">16</span>,

    <span class="comment">//If you want to create your own token type use this function, to use your own algorithm. </span>
    <span class="comment">//tokenAlgorithm : function() {</span>
    <span class="comment">//  Function shall return the token in sync mode (default: Base58 token)</span>
    <span class="comment">//},</span>

    <span class="comment">//includes the store configuration</span>
    <span class="comment">//setup a path to the node_module that should be used</span>
    <span class="comment">//setup a configuration array that will be applied to the store constructor</span>
    <span class="comment">//internally it looks like the following code :</span>
    <span class="comment">//  var store = require(this.options.store);</span>
    <span class="comment">//  store.call(this.options.store.config);</span>
    <span class="attr">store</span> : {
      <span class="attr">path</span>   : __dirname + <span class="string">'/node_modules/passwordless-redis'</span>,
      <span class="attr">config</span> : [
        <span class="number">6379</span>,
        <span class="string">'127.0.0.1'</span>,
        {

        }
      ]
    },

    <span class="comment">//Specify the delivery configurations</span>
    <span class="comment">//following object contains an example with emailjs</span>
    <span class="comment">//</span>
    <span class="comment">//Notice : currently only a delivery for emailjs is written</span>
    <span class="comment">//  If you want to use another delivery, feel free to implement it or apply a function like the following as the delivery</span>
    <span class="comment">//  function(options) {</span>
    <span class="comment">//    var email = require(options.path); </span>
    <span class="comment">//    var smtp  = email.server.connect(options.config.server);</span>
    <span class="comment">//</span>
    <span class="comment">//    return function(tokenToSend, uidToSend, recipient, callback, req) {</span>
    <span class="comment">//      ... do delivery stuff..</span>
    <span class="comment">//      callback(err);</span>
    <span class="comment">//    };</span>
    <span class="comment">//  }</span>
    <span class="attr">delivery</span> : {
      <span class="attr">type</span> : <span class="string">'emailjs'</span>,
      <span class="attr">allowGet</span> : <span class="literal">true</span>,

      <span class="attr">path</span> : __dirname + <span class="string">'/node_modules/emailjs'</span>,
      <span class="attr">config</span> : {
        <span class="attr">server</span> : {
          <span class="attr">user</span>     : <span class="string">'test.user@domain.com'</span>, 
          <span class="attr">password</span> : <span class="string">'yourPwd'</span>, 
          <span class="attr">host</span>     : <span class="string">'yourSmtp'</span>, 
          <span class="attr">ssl</span>      : <span class="literal">true</span>
        },

        <span class="comment">//all message parameters are compiled as an underscore template (http://underscorejs.org/#template)</span>
        <span class="comment">//the following parameters are available:</span>
        <span class="comment">// {</span>
        <span class="comment">//   hostName    : 'localhost:3000',</span>
        <span class="comment">//   tokenToSend : tokenToSend,</span>
        <span class="comment">//   uidToSend   : uidToSend,</span>
        <span class="comment">//   recipient   : recipient,</span>
        <span class="comment">//   req         : req </span>
        <span class="comment">// }</span>
        <span class="attr">msg</span> : {
          <span class="attr">text</span>    : <span class="string">'Hello!\nAccess your account here: http://&lt;%= hostname %&gt;?token=&lt;%= tokenToSend %&gt;&amp;uid='</span>,
          <span class="comment">//a html property was added by my self, to be able add html body automatically to the configuration</span>
          <span class="attr">html</span>    : <span class="string">'&lt;html&gt;&lt;p&gt;Hello&lt;/p&gt;&lt;br&gt;&lt;p&gt;Access your account here: http://&lt;%= hostname %&gt;?token=&lt;%= tokenToSend %&gt;&amp;uid=&lt;%= uidToSend %&gt;&lt;/p&gt;'</span>
          <span class="attr">subject</span> : <span class="string">'Token for &lt;%= hostname %&gt;'</span>
        }
      }
    },

    <span class="comment">//is used to check if an user is authorized to request a token</span>
    <span class="comment">//call the callback with an error and an user object (user object needs an parameter called "id" to specify it's email adress, sms, ...)</span>
    <span class="comment">//the default access functions contains the following function</span>
    <span class="attr">access</span> : <span class="function"><span class="keyword">function</span>(<span class="params">user, callback</span>) </span>{
      callback(<span class="literal">null</span>, user);
    }
  }
</code></pre>
<h1 id="license">License</h1>
<p>The MIT License (MIT)
Copyright © 2016 <copyright holders></p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</div>
          <div class="metadata">
            <div class="install"><code>npm install <span class="fn">passport-passwordless</span></code></div>
            <ul>
              <li><span class="version">0.0.1</span> published <abbr class="updated" title="2016-04-11T09:59:44Z">6 years ago</abbr></li>
              <li><a rel="licence" href="http://www.isc.org/software/license">ISC License</a></li>
            </ul>
            <ul>
              <li><b>1</b> downloads in the last day</li>
              <li><b>3</b> downloads in the last week</li>
              <li><b>19</b> downloads in the last month</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="search-con">
      <div class="head"><span class="close-ico"></span>
        <div class="hold">
          <h2>SEARCH FOR STRATEGIES</h2>
          <form action="/">
            <input value="" type="text" name="strategy" placeholder="Start typing" autocomplete="off">
          </form>
          <p class="info-line"><span>0</span>STRATEGIES</p>
        </div>
      </div>
      <div class="results">
        <section></section>
      </div>
    </div>
    <!--+google-tag-manager-noscript('GTM-M5S3PH')-->
  </body>
</html>