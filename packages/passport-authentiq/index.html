<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#" lang="en">
  <head>
    <title>passport-authentiq</title>
    <meta charset="utf-8">
    <meta name="description" content="Authentiq authentication strategy for Passport.">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="canonical" href="https://www.passportjs.org/packages/passport-authentiq/">
    <link rel="manifest" href="/manifest.webmanifest"/>
    <meta name="theme-color" content="#35DF79"/>
    <link rel="shortcut icon" href="/images/favicon/favicon.ico"/>
    <link rel="icon" sizes="16x16" type="image/png" href="/images/favicon/favicon-16x16.png"/>
    <link rel="icon" sizes="32x32" type="image/png" href="/images/favicon/favicon-32x32.png"/>
    <link rel="icon" sizes="36x36" type="image/png" href="/images/favicon/android-icon-36x36.png"/>
    <link rel="icon" sizes="48x48" type="image/png" href="/images/favicon/android-icon-48x48.png"/>
    <link rel="icon" sizes="70x70" type="image/png" href="/images/favicon/ms-icon-70x70.png"/>
    <link rel="icon" sizes="72x72" type="image/png" href="/images/favicon/android-icon-72x72.png"/>
    <link rel="icon" sizes="96x96" type="image/png" href="/images/favicon/android-icon-96x96.png"/>
    <link rel="icon" sizes="144x144" type="image/png" href="/images/favicon/ms-icon-144x144.png"/>
    <link rel="icon" sizes="150x150" type="image/png" href="/images/favicon/ms-icon-150x150.png"/>
    <link rel="icon" sizes="192x192" type="image/png" href="/images/favicon/android-icon-192x192.png"/>
    <link rel="icon" sizes="310x310" type="image/png" href="/images/favicon/ms-icon-310x310.png"/>
    <link rel="apple-touch-icon" href="/images/favicon/apple-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="60x60" href="/images/favicon/apple-icon-60x60.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="/images/favicon/apple-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon/apple-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="/images/favicon/apple-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/apple-icon-144x144.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/apple-icon-152x152.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-icon-180x180.png"/>
    <meta name="msapplication-config" content="/browserconfig.xml"/>
    <meta name="msapplication-TileColor" content="#35DF79"/>
    <meta name="msapplication-TileImage" content="/images/favicon/ms-icon-144x144.png"/>
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="passport-authentiq"/>
    <meta property="og:description" content="Authentiq authentication strategy for Passport."/>
    <meta property="og:url" content="https://www.passportjs.org/packages/passport-authentiq/"/>
    <meta property="og:image" content="https://www.passportjs.org/images/facebook-card.png"/>
    <meta property="og:image:type" content="image/png"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    <meta property="og:site_name" content="Passport.js"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@passportjs"/>
    <meta name="twitter:title" content="passport-authentiq"/>
    <meta name="twitter:description" content="Authentiq authentication strategy for Passport."/>
    <meta name="twitter:image" content="https://www.passportjs.org/images/twitter-card.png"/>
    <meta name="flattr:id" content="d5znvd"/>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-73332146-2', 'auto');
      ga('send', 'pageview');
    </script>
    <!--+google-tag-manager('GTM-M5S3PH')-->
    <!--link(type='text/css', rel='stylesheet', href='http://fast.fonts.net/cssapi/7527d73a-ebfe-45db-a201-ff2812df4b18.css')-->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
    <link rel="stylesheet" href="/assets/styles/all.css">
    <script data-main="/script/main" src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.js"></script>
  </head>
  <body>
    <div id="container"><span id="top"></span>
      <div id="toolbar">
        <div class="toolbar-search">
          <form action="/search">
            <button type="submit"></button>
            <input type="text" name="q" placeholder="Search for Strategies">
          </form>
        </div>
        <div class="toolbar-social">
          <ul>
            <li class="facebook"><a href="https://www.facebook.com/passportjs" target="_blank"></a></li>
            <li class="twitter"><a href="https://twitter.com/passportjs" target="_blank"></a></li>
            <li class="github"><a href="https://github.com/jaredhanson/passport" target="_blank"><span class="count">0</span></a></li>
          </ul>
        </div>
      </div>
      <nav id="menu"><a class="menu-logo" href="/" title="Passport.js"></a>
        <div class="menu-trigger"><span></span></div>
        <div class="menu-items">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/docs/">Documentation</a></li>
            <li><a href="/features/">Features</a></li>
            <li><a href="/packages/">Strategies</a></li>
          </ul><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=passportjsorg" id="_carbonads_js"></script>
        </div>
      </nav>
      <div id="content">
        <div class="package hproduct" id="package">
          <div class="description"><h1 id="passport-authentiq">passport-authentiq</h1>
<p><a href="http://passportjs.org/">Passport</a> strategy for authenticating with <a href="https://www.authentiq.com/">Authentiq</a> via <a href="http://openid.net/connect/">OpenID Connect</a>, an identity layer built on top of OAuth 2.0. </p>
<p>This module lets you authenticate without passwords using Authentiq ID in your Node.js applications. By plugging into Passport, Authentiq  authentication can be easily and unobtrusively integrated into any application or framework that supports <a href="http://www.senchalabs.org/connect/">Connect</a>-style middleware, including <a href="http://expressjs.com/">Express</a>.</p>
<h2 id="install">Install</h2>
<pre><code class="lang-bash">npm install passport passport-authentiq
</code></pre>
<h2 id="usage">Usage</h2>
<h4 id="create-an-application">Create an Application</h4>
<p>Before using <code>passport-authentiq</code>, you must register an application with Authentiq. If you have not already done so, a new application can be created at the <a href="https://dashboard.authentiq.com/">Authentiq Dashboard</a>.</p>
<p>Your application will be issued a Client ID and Client Secret, that need to be provided to the strategy. You will also need to configure a callback URL which matches the route in your application.</p>
<h4 id="configure-strategy">Configure Strategy</h4>
<p>To configure the strategy the <code>clientID</code> and <code>clientSecret</code> obtained previously need to be supplied as parameters.</p>
<p>The <code>callbackURL</code> is the URL to which Authentiq will redirect the user after granting authorization.</p>
<p>The <code>scope</code> parameter specifies what identity claims to request from the user. Valid scopes include <code>aq:name</code>, <code>email</code>, <code>phone</code>, <code>address</code>, and <code>aq:location</code>. The <code>openid</code> scope is added automatically. Appending <code>~rs</code> to the <code>email</code> or <code>phone</code> scope to <a href="https://developers.authentiq.com/#identity-claims">ensure</a> those claims are always <em>verified</em>.</p>
<pre><code class="lang-javascript"><span class="keyword">var</span> AuthentiqStrategy = <span class="built_in">require</span>(<span class="string">'passport-authentiq'</span>).Strategy;

passport.use(<span class="keyword">new</span> AuthentiqStrategy({
    <span class="attr">clientID</span>: <span class="string">'Authentiq Client ID'</span>,
    <span class="attr">clientSecret</span>: <span class="string">'Authentiq Client Secret'</span>,
    <span class="attr">callbackURL</span>: <span class="string">'https://website.example/auth/authentiq/callback'</span>,
    <span class="attr">scope</span>: [<span class="string">'aq:name'</span>, <span class="string">'email~rs'</span>, <span class="string">'phone'</span>]
},
<span class="function"><span class="keyword">function</span> (<span class="params">iss, sub, profile, done</span>) </span>{
    <span class="comment">// Persist or update user locally.</span>
    <span class="keyword">return</span> done(err, user);
}));
</code></pre>
<p>The strategy will call the provided <code>verify</code> callback identity information received form the authorization server.</p>
<p>In the above example, the callback accepts <code>iss</code>, <code>sub</code> and the profile of the user, but there are several other callback signatures available:</p>
<pre><code class="lang-javascript">    <span class="function"><span class="keyword">function</span> (<span class="params">iss, sub, profile, jwtClaims, accessToken, refreshToken, params, done</span>)

    <span class="title">function</span> (<span class="params">iss, sub, profile, accessToken, refreshToken, params, done</span>)

    <span class="title">function</span> (<span class="params">iss, sub, profile, accessToken, refreshToken, done</span>)

    <span class="title">function</span>(<span class="params">iss, sub, profile, done</span>)

    <span class="title">function</span>(<span class="params">iss, sub, done</span>)</span>
</code></pre>
<p>The callback must call <code>done</code> to complete the authentication.</p>
<h4 id="authenticate-requests">Authenticate Requests</h4>
<p>Use <code>passport.authenticate()</code>, specifying the <code>authentiq</code> strategy, to authenticate requests.</p>
<p>For example, as route middleware in an <a href="http://expressjs.com/">Express</a> application:</p>
<pre><code class="lang-javascript">app.get(<span class="string">'/auth/authentiq'</span>, passport.authenticate(<span class="string">'authentiq'</span>));

app.get(<span class="string">'/auth/authentiq/callback'</span>,
    passport.authenticate(<span class="string">'authentiq'</span>, {
        <span class="attr">successRedirect</span>: <span class="string">'/signed-in'</span>,
        <span class="attr">failureRedirect</span>: <span class="string">'/error'</span>
    })
);
</code></pre>
<p>See <a href="http://expressjs.com/en/starter/hello-world.html">here</a> for a boilerplate Express application. You will need the following dependencies</p>
<pre><code>npm install <span class="built_in">express</span> <span class="built_in">express</span>-session
</code></pre><h2 id="contributing">Contributing</h2>
<h4 id="tests">Tests</h4>
<p>The test suite is located in the <code>test/</code> directory.  All new features are expected to have corresponding test cases.  Ensure that the complete test suite passes by executing:</p>
<pre><code class="lang-bash">make <span class="built_in">test</span>
</code></pre>
<h4 id="coverage">Coverage</h4>
<pre><code class="lang-bash">make <span class="built_in">test</span>-cov
make view-cov
</code></pre>
<h2 id="license">License</h2>
<p><a href="http://opensource.org/licenses/MIT">The MIT License</a></p>
<p>Â© 2017 <a href="https://www.authentiq.com/">Authentiq</a></p>
</div>
          <div class="metadata">
            <div class="install"><code>npm install <span class="fn">passport-authentiq</span></code></div>
            <ul>
              <li><span class="version">1.0.0</span> published <abbr class="updated" title="2017-05-16T21:28:04Z">5 years ago</abbr></li>
              <li><a class="url" href="https://github.com/AuthentiqID/passport-authentiq">https://github.com/AuthentiqID/passport-authentiq#readme</a></li>
              <li><a rel="licence" href="http://www.opensource.org/licenses/MIT">MIT License</a></li>
            </ul>
            <ul>
              <li><b>0</b> downloads in the last day</li>
              <li><b>2</b> downloads in the last week</li>
              <li><b>5</b> downloads in the last month</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="search-con">
      <div class="head"><span class="close-ico"></span>
        <div class="hold">
          <h2>SEARCH FOR STRATEGIES</h2>
          <form action="/">
            <input value="" type="text" name="strategy" placeholder="Start typing" autocomplete="off">
          </form>
          <p class="info-line"><span>0</span>STRATEGIES</p>
        </div>
      </div>
      <div class="results">
        <section></section>
      </div>
    </div>
    <!--+google-tag-manager-noscript('GTM-M5S3PH')-->
  </body>
</html>